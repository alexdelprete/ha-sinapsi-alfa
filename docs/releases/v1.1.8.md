# Release Notes - v1.1.8

**Release Date:** 2025-12-21

## Overview

**Patch release** - Fixes integration reload issue where "Restart Home Assistant" was required.

## Bug Fixes

### Fixed Integration Reload

The integration now properly reloads without requiring a Home Assistant restart.

**Root Cause:** The `SinapsiAlfaAPI` class was missing a `close()` method that is called during integration unload. This caused an `AttributeError` during the unload process, preventing clean reload.

**Fix:** Added `async def close()` method to properly close the Modbus transport connection during unload.

## Files Changed

| File | Changes |
|------|---------|
| `api.py` | Added `close()` method to `SinapsiAlfaAPI` class |
| `manifest.json` | Version bump to 1.1.8 |
| `const.py` | Version bump to 1.1.8 |

## Technical Details

The integration uses ModbusLink's context manager pattern (`async with self._client:`) for connection management during polling, which automatically opens and closes connections per cycle. The new `close()` method ensures clean shutdown during integration unload by calling `await self._transport.close()`.

## Requirements

- Home Assistant 2025.10.0 or newer
- Python 3.13.2 or newer
- ModbusLink 1.3.1 or newer

## Upgrade Notes

- No configuration changes required
- Integration can now be reloaded from UI without restarting Home Assistant

## Full Changelog

https://github.com/alexdelprete/ha-sinapsi-alfa/compare/v1.1.7...v1.1.8
