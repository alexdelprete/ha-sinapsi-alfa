# v1.2.6

[![GitHub Downloads](https://img.shields.io/github/downloads/alexdelprete/ha-sinapsi-alfa/v1.2.6/total?style=for-the-badge)](https://github.com/alexdelprete/ha-sinapsi-alfa/releases/tag/v1.2.6)

**Release Date:** 2026-01-09

**Patch release** - Fixes empty recovery script validation error in options flow.

## What's Changed

### Bug Fixes

- **Fixed empty recovery script validation** - When saving options with an empty recovery script field, the
  form no longer shows "Entity is neither a valid entity ID nor a valid UUID" error

## Issue Fixed

This release fixes [#190](https://github.com/alexdelprete/ha-sinapsi-alfa/issues/190) - Error when saving
options with empty recovery script field.

Thanks to [@shiner66](https://github.com/shiner66) for reporting this issue!

## Technical Details

The `EntitySelector` for the optional `recovery_script` field was rejecting empty strings as invalid entity IDs.
The fix:

1. **Input preprocessing** - Convert empty string to `None` before validation in `async_step_init()`
2. **Schema improvement** - Use `suggested_value` instead of `default` for the optional entity selector

This ensures the EntitySelector receives `None` (valid) instead of `""` (invalid) when no script is selected.

### Files Changed

- `custom_components/sinapsi_alfa/config_flow.py` - Options flow empty string handling
- `tests/test_config_flow.py` - Updated test to match new behavior

## Full Changelog

[v1.2.5...v1.2.6](https://github.com/alexdelprete/ha-sinapsi-alfa/compare/v1.2.5...v1.2.6)
