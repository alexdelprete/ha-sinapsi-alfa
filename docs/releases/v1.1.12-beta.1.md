# v1.1.12-beta.1

**Release Date:** 2025-12-29

**Type:** Beta Release

> **Beta Notice:** This release includes significant new features for Gold tier Quality Scale compliance.
> Please test thoroughly before using in production.

## What's New

### Gold Tier Quality Scale Features

This release implements all Gold tier requirements from the
[Home Assistant Integration Quality Scale](https://developers.home-assistant.io/docs/core/integration-quality-scale/).

#### Diagnostics Support

- **Download diagnostics** from Settings > Devices & Services > Alfa by Sinapsi > 3-dot menu > Download Diagnostics
- Provides debug information including:
  - Integration configuration (host/port redacted)
  - Current coordinator state
  - Last update timestamp
  - All sensor data

#### Repair Issues

- **Automatic repair issue creation** after 3 consecutive connection failures
- Repair issue appears in Settings > System > Repairs
- Provides troubleshooting guidance for connection problems
- Issue auto-resolves when connection is restored

#### Icon Translations

- Custom icons defined in `icons.json` for all 24 sensors
- Icons display correctly in the entity list and dashboards

#### Entity Translations

- **10 languages supported**: German (de), English (en), Spanish (es), Estonian (et),
  Finnish (fi), French (fr), Italian (it), Norwegian Bokmål (nb), Portuguese (pt), Swedish (sv)
- All sensor names, config flow labels, and error messages translated

#### Exception Translations

- Error messages now use Home Assistant's translation system
- Errors display in the user's configured language

#### Entity Disabled by Default

- F1-F6 time band sensors (12 sensors) are now disabled by default
- Users can enable them in Settings > Devices & Services > Alfa by Sinapsi > Entities
- Reduces clutter for users who don't need time band tracking

### Code Quality Improvements

- **Full type annotations** for mypy compliance (strict-typing rule)
- **95% test coverage** threshold in GitHub Actions
- **README restructured** with proper markdown formatting
- **Updated pyproject.toml** with pymarkdown configuration

## Testing Focus

### 1. Diagnostics Download (NEW)

1. Go to **Settings** > **Devices & Services** > **Alfa by Sinapsi**
1. Click the **three-dot menu** (⋮)
1. Select **Download Diagnostics**
1. Verify JSON file downloads with device/sensor data
1. Confirm sensitive data (host IP) is redacted

### 2. Repair Issues (NEW)

1. Disconnect the Alfa device from the network (or change host to invalid IP)
1. Wait for 3+ polling cycles (default: 3 minutes)
1. Go to **Settings** > **System** > **Repairs**
1. Verify a repair issue appears for the integration
1. Reconnect the device
1. Verify the repair issue disappears after successful connection

### 3. Entity Disabled by Default (NEW)

1. Go to **Settings** > **Devices & Services** > **Alfa by Sinapsi**
1. Click on the device
1. Verify F1-F6 time band sensors (12 sensors) show as disabled
1. Enable one and verify it starts collecting data

### 4. Translations (NEW)

1. Change Home Assistant language (Settings > System > General > Language)
1. Go to integration settings and verify labels are translated
1. Check sensor entity names in the correct language

### 5. Existing Features (Regression Testing)

- Integration setup with new device
- Options flow (scan interval, timeout)
- Reconfigure flow (host, port, name)
- All 24 sensors updating correctly
- Calculated sensors (power/energy consumed, auto-consumed)

## Breaking Changes

None.

## Full Changelog

[Compare v1.1.11...v1.1.12-beta.1](https://github.com/alexdelprete/ha-sinapsi-alfa/compare/v1.1.11...v1.1.12-beta.1)
