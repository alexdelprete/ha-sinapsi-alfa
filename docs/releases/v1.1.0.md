# Release Notes - v1.1.0

**Release Date:** 2025-12-17

## Overview

**Minor release** - Adds user-configurable connection timeout to support high-latency connections (VPN, WAN).

## What's New

### User-Configurable Connection Timeout (Addresses #180)

Added a new `timeout` configuration parameter that allows users to adjust the connection timeout for high-latency network scenarios:

| Parameter | Default | Range | Description                   |
| --------- | ------- | ----- | ----------------------------- |
| `timeout` | 10s     | 5-60s | Connection timeout in seconds |

**Why This Matters:**

- **VPN connections** - Users connecting to Alfa devices over VPN tunnels often experience latency of 100-200ms+
- **WAN deployments** - Remote installations may have higher latency than local networks
- **Previous behavior** - v1.0.x used hardcoded 3-5 second timeouts that were too aggressive for high-latency scenarios

**Configuration:**

The timeout can be configured during initial setup or changed later via the integration options:

1. Go to **Settings → Devices & Services → Alfa by Sinapsi**
1. Click **Configure**
1. Adjust the **Connection Timeout** value (5-60 seconds)

**Recommended Values:**

| Network Type     | Recommended Timeout |
| ---------------- | ------------------- |
| Local LAN        | 10s (default)       |
| VPN/WAN          | 30-60s              |
| High-latency VPN | 60s                 |

### Default Timeout Increased

The default timeout has been increased from 3-5 seconds to **10 seconds** to better accommodate typical network conditions without requiring manual configuration.

## Files Changed

| File                   | Changes                                                                       |
| ---------------------- | ----------------------------------------------------------------------------- |
| `const.py`             | Added `CONF_TIMEOUT`, `DEFAULT_TIMEOUT=10`, `MIN_TIMEOUT=5`, `MAX_TIMEOUT=60` |
| `api.py`               | Accept `timeout` parameter; use configurable timeout for all operations       |
| `config_flow.py`       | Added timeout field to ConfigFlow and OptionsFlow                             |
| `coordinator.py`       | Extract timeout from config and pass to API                                   |
| `translations/en.json` | Added timeout field label                                                     |
| `translations/pt.json` | Added timeout field label (Portuguese)                                        |
| `CLAUDE.md`            | Added timeout parameter documentation; added ModbusLink docs hint             |

## Acknowledgments

Thanks to Lorenzo Canale ([@lorenzocanalelc](https://github.com/lorenzocanalelc)) for reporting the VPN connection issue in [#180](https://github.com/alexdelprete/ha-sinapsi-alfa/issues/180).

## Requirements

- Home Assistant 2025.10.0 or newer
- Python 3.13.2 or newer

## Upgrade Notes

- **Existing installations** will use the new default timeout of 10 seconds automatically
- **VPN users** should increase the timeout to 30-60 seconds via the integration options
- No data loss or reconfiguration required for existing setups

## Full Changelog

https://github.com/alexdelprete/ha-sinapsi-alfa/compare/v1.0.1...v1.1.0
