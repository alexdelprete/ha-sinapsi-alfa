# v1.2.4-beta.1

[![GitHub Downloads](https://img.shields.io/github/downloads/alexdelprete/ha-sinapsi-alfa/v1.2.4-beta.1/total?style=for-the-badge)](https://github.com/alexdelprete/ha-sinapsi-alfa/releases/tag/v1.2.4-beta.1)

**Beta release** - Recovery notification improvements. Testing required.

## What's Changed

### Bug Fixes

- **Fixed recovery notification display** - Switched from HA repair issues to `persistent_notification` for recovery
  notifications. When clicking the notification, the full message with timestamps now displays correctly.
- **Fixed duplicate notifications** - Recovery notifications no longer appear twice after acknowledging.

## Technical Details

The recovery notification system was using Home Assistant's repair issue system (`issue_registry`), which is designed
for actionable issues that require user intervention. This caused two problems:

1. The full notification text (including timestamps) wasn't displayed properly when clicking the notification
2. Using `ConfirmRepairFlow` caused duplicate notifications after acknowledging

The fix switches to `persistent_notification` service for recovery notifications, which:

- Displays the complete message with all timestamps when clicked
- Uses a consistent `notification_id` to prevent duplicates
- Aligns with the implementation in `ha-abb-fimer-pvi-vsn-rest`

Connection failure notifications continue to use the repair issue system since they represent actionable issues.

## Testing Focus

Please verify:

1. Recovery notifications display full message with timestamps when clicked
2. No duplicate notifications appear after acknowledging
3. Connection failure repair issues still work correctly

## Full Changelog

[v1.2.3...v1.2.4-beta.1](https://github.com/alexdelprete/ha-sinapsi-alfa/compare/v1.2.3...v1.2.4-beta.1)
