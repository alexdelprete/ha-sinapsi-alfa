# Release Notes - v0.4.2

Stable release with pymodbus 3.11.1 compatibility and improved MAC address detection.

---

## 🚀 Features & Improvements

### Updated pymodbus to 3.11.1
- **Compatibility**: Ensures compatibility with Home Assistant 2025.9.x and later versions
- **Stability**: Benefits from bug fixes and improvements in pymodbus 3.11.1
- **Future-proof**: Keeps the integration aligned with Home Assistant's dependency requirements

### Improved Network MAC Address Detection
- **Enhancement**: Enhanced the `getmac` functionality using `network_request` method
- **Reliability**: More reliable device identification for unique device IDs
- **Benefit**: Better device tracking and management in Home Assistant

---

## 🧹 Code Quality

### Style Improvements
- Applied style fixes using ruff linter for better code consistency
- Improved code readability and maintainability
- Follows Python best practices

### Repository Cleanup
- Removed Claude settings from version control
- Added `.claude/` to `.gitignore` for better repository cleanliness

---

## 📦 Dependencies Updates

### Main Dependencies
- **pymodbus**: Updated to 3.11.1 (from previous version)
  - Critical for Home Assistant 2025.9.x compatibility
  - Includes important bug fixes and performance improvements

### Development Tools
- **ruff**: Updated through multiple versions (0.12.8 → 0.12.9 → 0.12.10 → 0.12.11 → 0.12.12 → 0.13.0 → 0.13.1)
  - Improved linting and code quality checks
  - Better Python 3.11+ support

### GitHub Actions
- **actions/setup-python**: Updated from 5.6.0 to 6.0.0
  - Improved Python environment setup in CI
  - Better caching support
- **actions/checkout**: Updated from 4.2.2 to 5.0.0
  - Enhanced repository checkout functionality
  - Performance improvements
- **softprops/action-gh-release**: Updated from 2.3.2 to 2.3.3
  - Improved release automation
  - Better error handling

---

## 🔧 Maintenance

### Automated Dependency Management
- Continuous dependency updates via Dependabot
- Enhanced security through timely updates
- Improved performance with latest package versions

### CI/CD Improvements
- Enhanced CI/CD workflows with updated GitHub Actions
- Better testing and validation processes
- Automated style checking and formatting

---

## ⚠️ Requirements

### Minimum Versions
- **Home Assistant**: 2025.9.0 or newer
- **Python**: 3.11 or newer (managed by Home Assistant)

### Dependencies
- **pymodbus**: >= 3.11.1
- **getmac**: >= 0.9.5

---

## 🔄 Migration from v0.4.1

This is a **seamless upgrade** from v0.4.1. No configuration changes required.

### Upgrade Steps

#### Via HACS (Recommended)
1. HACS will notify you of the update
2. Click "Update"
3. Restart Home Assistant
4. Verify integration functionality

#### Manual Installation
1. Download the v0.4.2 release
2. Replace integration files in `custom_components/sinapsi_alfa/`
3. Restart Home Assistant
4. Verify all sensors are working

---

## ✅ Compatibility

### Home Assistant Versions
- **Compatible**: 2025.9.0 and later
- **Tested with**: 2025.9.x releases
- **Python**: 3.11+ (as provided by Home Assistant)

### Preserved Features
- All existing functionality maintained
- No breaking changes
- Historical data preserved
- Entity IDs unchanged

---

## 📝 Commits Since v0.4.1

This release includes multiple commits focused on:
- pymodbus 3.11.1 update
- Enhanced MAC address detection
- Code style improvements
- Dependency updates (ruff, GitHub Actions)
- Repository cleanup

---

## 🧪 Testing

### Verified Functionality
- ✅ All sensors reading correctly
- ✅ Device detection working reliably
- ✅ Integration reload successful
- ✅ Compatible with HA 2025.9.x
- ✅ No memory leaks or performance issues

### Test Coverage
- Basic functionality (sensor readings, updates)
- Integration lifecycle (setup, reload, unload)
- Error handling (network issues, device offline)
- Configuration flow (initial setup, options)

---

## 🙏 Acknowledgments

Thanks to:
- The Home Assistant community for feedback and testing
- Dependabot for automated dependency updates
- All users who reported issues and helped improve the integration

---

## 📞 Support

### Getting Help
- **Issues**: [GitHub Issues](https://github.com/alexdelprete/ha-sinapsi-alfa/issues)
- **Forum**: [Home Assistant Community](https://community.home-assistant.io/t/custom-integration-alfa-by-sinapsi-data-integration/705294)
- **Documentation**: [README.md](../../README.md)

### Reporting Issues
When reporting issues, please include:
- Home Assistant version
- Python version
- Integration version (v0.4.2)
- Relevant log excerpts
- Steps to reproduce

---

## 📚 Related Links

- **Repository**: https://github.com/alexdelprete/ha-sinapsi-alfa
- **HACS**: Available in HACS default repository
- **Sinapsi Alfa Device**: https://www.alfabysinapsi.it/

---

**Full Changelog**: https://github.com/alexdelprete/ha-sinapsi-alfa/compare/v0.4.1...v0.4.2

🤖 Generated with [Claude Code](https://claude.com/claude-code)
